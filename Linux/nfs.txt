Установка и настройка NFS сервера

Для объединения двух серверов с общим хранением данных используется "Network File System", для этого на сервере управления мы введем следующую команду yum -y install nfs-utils, 
добавим сервис в автозапуск systemctl enable nfs-server и отредактируем файлконфигурации находящийся по следующуму пути /etc/exports
В вайле конфигурации нужно указать каталог хранения файлов и кому разрешить монтирование по сети:
/var/lib/vlir           192.168.0.53(rw,sync,no_root_squash,no_subtree_check)
Сохраняем изменения, экспортируем, проверяем что настройки верны, введя в терминале команду:
exportfs -a
и запускаем службу:
systemctl start nfs-server

На клиенте для проверки, что доступ разрешен и можем записывать файлы; подмонтируем в директорию /var/lib/vlir, если такой директории нет, требуется создать:
mkdir -p /var/lib/vlir, после монтируем вручную
mount -t nfs 192.168.0.52:/var/lib/vlir /var/lib/vlir
для автоматического монтирования директории после включения или перезапуска сервера в файле fstab нужно добавить следующие строчки:
откроем файл для редактирования vi /etc/fstab и в конец текстового файла добавим:
192.168.0.52:/var/lib/vlir /var/lib/vlir nfs rsize=8192,wsize=8192,timeo=14,intr

Проверим, что все подмонтировано и работает:
mount -a 
mount | grep 192
Если в окне термина отобразилось:
192.168.0.52:/var/lib/vlir on /var/lib/vlir type nfs (rw,relatime,vers=3,rsize=8192,wsize=8192,namlen=255,hard,proto=tcp,timeo=14,retrans=2,sec=sys,mountaddr=192.168.0.52,mountvers=3,mountport=20048,mountproto=udp,local_lock=none,addr=192.168.0.52)
Значит настроено верно и все работает.



